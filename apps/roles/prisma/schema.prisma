generator client {
    provider      = "prisma-client-js"
    output        = "client"
    binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model Role {
    id   String @id() @default(nanoid())
    name String @unique(map: "uq_role_name")

    scopes RoleScopes[]

    @@map(name: "role")
}

model Scope {
    id   String @id() @default(nanoid())
    name String @unique(map: "uq_scope_name")

    roles RoleScopes[]

    @@map(name: "scope")
}

model RoleScopes {
    roleId  String
    scopeId String

    role  Role  @relation(fields: [roleId], references: [id], map: "fk_role_scope", onDelete: Cascade)
    scope Scope @relation(fields: [scopeId], references: [id], map: "fk_scope_role", onDelete: Cascade)

    @@id(name: "pk_role_scope", fields: [roleId, scopeId])
    @@map(name: "role_scope")
}
