syntax = "proto3";

package role;

import "common.proto";
import "scope.proto";

service RolesService {
    // /roles
    rpc GetAll (GetAllRequest) returns (Roles);
    rpc Create (CreateRequest) returns (Role);

    // /roles/:roleId
    rpc GetById (GetByIdRequest) returns (Role);
    rpc Update (UpdateRequest) returns (Role);
    rpc Remove (RemoveRequest) returns (common.EmptyResponse);

    // /roles/:roleId/scopes
    rpc GetAllScopes (GetAllScopesRequest) returns (scope.Scopes);
    rpc AddScope (AddScopeRequest) returns (Role);
    rpc RemoveScope (RemoveScopeRequest) returns (Role);
}

message Role {
    string id = 1;
    string name = 2;
    repeated scope.Scope scopes = 3;
}

message Roles {
    repeated Role roles = 1;
}

message GetAllRequest {
    repeated string has_scopes = 1;
}

message GetByIdRequest {}

message GetAllScopesRequest {
    string role_id = 1;
}

message CreateRequest {
    string name = 1;
}

message AddScopeRequest {
    string scope_id = 1;
}

message UpdateRequest {
    string id = 1;
    string name = 2;
}

message RemoveRequest {
    string role_id = 1;
}

message RemoveScopeRequest {
    string scope_id = 1;
}
